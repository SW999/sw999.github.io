<!DOCTYPE HTML>
<html lang="en-EN">
<head>
  <title>The New Year countdown</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1" />
<style>
@import url("https://fonts.googleapis.com/css2?family=Mountains+of+Christmas:wght@700&display=swap");
:root {
  --c-santa-red: #d63527;
  --c-santa-skin: #fde2b7;
  --c-santa-cheek: #f4cfe3;
  --c-santa-dark: #520d0d;
  --c-white: #fff;
  --c-black: #000;
  --c-bg: #005b38;
  
  --c-deer-skin: #cca58b;
  --c-deer-horn: #f0dbc2;
  --c-sled: #690e00;
  
  --font-main: "Mountains of Christmas", cursive;
}

body {
  margin: 0;
  overflow-x: hidden;
  background-color: var(--c-bg);
  color: var(--c-white);
  font-family: var(--font-main);

  * { font-family: inherit; }
}

a { color: inherit; text-decoration: none; }
ul, li { padding: 0; margin: 0; list-style: none; }
p, h1, h2, h3, h4, h5, h6 { margin: 0; }

.countdownSection {
  display: grid;
  place-items: center;
  align-content: center;
  width: 100%;
  min-height: 100vh;
  position: relative;
  overflow: hidden;
  box-sizing: border-box;

  &:before, &:after {
    content: "";
    position: absolute;
    pointer-events: none;
  }

  &:before {
    inset: 0;
    background: radial-gradient(rgba(255, 255, 255, 0.3), transparent);
  }

  &:after {
    width: 90%;
    height: 90%;
    border: 1px solid rgba(255, 255, 255, 0.1);
    top: 50%; left: 50%;
    transform: translate(-50%, -50%);
  }

  .decorations {
    pointer-events: none;

    .decoration {
      --size: 500px;
      position: absolute;
      width: var(--size);
      height: var(--size);
      background: url("./decoration.png") no-repeat center / cover;
      filter: blur(3px);
      z-index: 1;

      /* Data-атрибуты для позиционирования */
      &[data-pos="top left"]     { top: 0; left: 0; transform: rotate(90deg); }
      &[data-pos="top right"]    { top: 0; right: 0; transform: rotate(180deg); }
      &[data-pos="bottom left"]  { bottom: 0; left: 0; }
      &[data-pos="bottom right"] { bottom: 0; right: 0; transform: rotate(-90deg); }
    }

    .snow {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 1;

      .particle {
        fill: var(--c-white);
        animation: snow 5s ease-out infinite;

        &:nth-child(2n) { animation-delay: 1.5s; }
        &:nth-child(3n) { animation-delay: 2.5s; animation-duration: 5.3s; }
        &:nth-child(4n) { animation-delay: 1s; animation-duration: 5.2s; }
        &:nth-child(5n) { animation-delay: 3s; }
      }
    }

    /* === SANTA & REINDEER === */
.santaWrapper {
      position: absolute;
      bottom: 0;
      left: 0;
      width: 430px;
      height: 155px;
      transform: translateX(-100%);
      animation: santa__mov 15s linear infinite;

      & * { position: absolute; }
      
      & *:before, & *:after {
        content: "";
        position: absolute;
      }

      .santa {
        left: 0;
        bottom: 0;
        width: 125px;
        height: 107px;
        z-index: 10;
        transform: rotateY(180deg);

        &:before, &:after { bottom: 0; background-color: var(--c-santa-dark); }
        &:before {
          left: -10px; width: 126px; height: 30px;
          border-radius: 10px 50% 10px 50%;
          z-index: 10;
        }
        &:after {
          left: 70px; width: 50px; height: 53px;
          border-radius: 50% 10px 22px 10px;
          transform: rotate(8deg);
        }

        .hat > * {
          top: 7px; left: 31px; width: 43px; height: 58px;
          border-radius: 50%;
          transform: rotate(28deg);
          background-color: var(--c-santa-red);

          &:nth-child(1) {
             &:before { top: 9px; left: 45px; width: 7px; height: 7px; border-radius: 50%; background: var(--c-white); }
             &:after { top: 3px; left: 19px; width: 30px; height: 7px; border-radius: 50%; transform: rotate(22deg); background: var(--c-santa-red); }
          }
          &:nth-child(2) {
            top: 18px; width: 44px; height: 34px;
            transform: rotate(12deg); background: var(--c-white);
          }
        }

        .face {
          top: 25px; left: 37px; width: 31px; height: 17px;
          border-radius: 20px 20px 50% 50%;
          transform: rotate(10deg);
          background-color: var(--c-santa-skin);
          z-index: 10;

          .eyeBrows {
            width: 2px; height: 7px; border-radius: 50%; background: var(--c-white);
            &.left { top: 2px; left: 22px; transform: rotate(-65deg); }
            &.right { top: 1px; left: 4px; transform: rotate(65deg); }
          }

          .eye {
            top: 8px; width: 3px; height: 4px; border-radius: 50%; background: var(--c-black);
            &.left { left: 2px; }
            &.right { left: 20px; }
          }

          .nose { top: 10px; left: 6px; width: 12px; height: 9px; border-radius: 50%; z-index: 10; background: #f7d194; }

          .cheek {
            width: 7px; height: 7px; border-radius: 50%; z-index: 10; background: var(--c-santa-cheek);
            &.left { top: 12px; left: -3px; }
            &.right { top: 13px; left: 22px; }
          }

          .beard > * {
            top: 8px; left: -14px; width: 15px; height: 17px;
            border-radius: 50%; background: var(--c-white);

            &:before, &:after { background: var(--c-white); border-radius: 50%; }
            
            &:first-child:before { top: 12px; left: 1px; width: 15px; height: 17px; }
            
            &:nth-child(2) {
              top: 16px; left: -8px; width: 26px; height: 30px;
              &:before { top: 16px; left: 13px; width: 19px; height: 17px; }
              &:after { top: 1px; left: 13px; width: 19px; height: 17px; }
            }
            
            &:nth-child(3) {
              top: 16px; left: 14px; width: 27px; height: 28px;
              &:before { top: -4px; left: 13px; width: 17px; height: 17px; }
            }
          }
        }

        .body {
          top: 54px; left: 16px; width: 88px; height: 53px;

          &:before {
            top: -23px; right: -10px; width: 53px; height: 51px;
            border-radius: 42% 50%; background: #f3f0f0; z-index: -1;
          }

          .sweater {
            top: -3px; left: 10px; width: 45px; height: 39px;
            border-radius: 50% 50% 10% 10%; background: var(--c-santa-red); z-index: 5;
            
            &:before { top: 28px; left: 0; width: 45px; height: 5px; background: var(--c-black); transform: rotate(1deg); }
            &:after { top: 27px; left: 10px; width: 7px; height: 5px; background: var(--c-black); border: 1px solid var(--c-white); border-radius: 3px; transform: rotate(1deg); }
          }

          .hand {
            &.left {
              top: 5px; left: 19px; width: 33px; height: 30px; overflow: hidden;
              .inner {
                top: 10px; left: 8px; width: 49px; height: 7px; z-index: 100;
                border-radius: 10px; background: var(--c-santa-red);
                transform: rotate(12deg);
                animation: santa__hand-right 0.3s linear alternate infinite;
                &:before { width: 8px; height: 7px; top: -2px; left: -6px; background: var(--c-black); border-radius: 50%; transform: rotate(25deg); }
              }
            }
            &.right {
              top: 4px; left: 3px; width: 11px; height: 7px;
              border-radius: 10px; background: var(--c-santa-red);
              transform: rotate(25deg);
              animation: santa__hand-left 0.3s linear alternate infinite;
              &:before { width: 8px; height: 7px; top: -2px; left: -6px; background: var(--c-black); border-radius: 50%; transform: rotate(10deg); }
            }
          }
        }
      }

      .rope {
        top: 92px; left: 84px; width: 182px; height: 33px; overflow: hidden; z-index: 10;
        transform-origin: bottom right;
        animation: rope__right 0.3s linear alternate infinite;
        
        &:after { bottom: 0; left: -12px; width: 100%; height: 48px; border-bottom: 1px solid var(--c-white); border-radius: 50%; }

        &.back {
          top: 85px; left: 105px; width: 149px;
          transform: rotate(4deg); z-index: 0; transform-origin: top left;
          animation: rope__left 0.3s linear alternate infinite;
        }
      }

      .sled {
        bottom: -12px; left: 0; width: 145px; height: 11px;
        transform: rotate(-3deg);
        border-bottom: 5px solid var(--c-sled);
        border-right: 5px solid var(--c-sled);
        border-radius: 10px;
        z-index: 10;

        &:before { top: 2px; left: 34px; width: 5px; height: 9px; background: var(--c-sled); }
        &:after { top: 3px; left: 108px; width: 5px; height: 8px; background: var(--c-sled); }
      }

      .reindeer {
        width: 115px; height: 155px; top: 50px; right: 0;
        transform: rotate(14deg) translateX(calc(-100% - 30px));
        z-index: 0;

        &:before { top: 65px; left: 76px; width: 8px; height: 31px; background: var(--c-santa-dark); z-index: 10; transform: rotate(-55deg); }

        &.second {
          top: 0; transform: rotate(14deg);
          .rope {
            top: 70px; left: -55px; width: 155px;
            transform: rotate(-15deg);
            animation: rope__inner 0.3s linear alternate infinite;
          }
        }

        .face {
          width: 30px; height: 22px; top: 44px; left: 72px;
          border-radius: 10px 10px 50% 50%; transform: rotate(-3deg); background: var(--c-deer-skin);
          
          &:before { width: 29px; height: 16px; top: 0; left: 11px; border-radius: 50%; background: var(--c-deer-skin); transform: rotate(-49deg); }
          &:after { width: 5px; height: 5px; top: -8px; left: 31px; border-radius: 50%; background: var(--c-black); }

          .ear {
            width: 21px; height: 11px; top: 4px; left: -18px;
            border-radius: 4px 0 50% 50%; transform: rotate(4deg); background: var(--c-deer-skin);
            &:before { top: -2px; left: 34px; width: 4px; height: 5px; border-radius: 50%; transform: rotate(-35deg); background: var(--c-black); }
          }

          .horn {
            width: 29px; height: 4px; top: -7px; left: -21px;
            border-radius: 2px; transform: rotate(38deg); background: var(--c-deer-horn);
            
            &:before, &:after { background: var(--c-deer-horn); border-radius: 2px; }

            &.left {
              &:before { top: -4px; left: 6px; width: 14px; height: 4px; transform: rotate(43deg); }
              &:after { top: -4px; left: 13px; width: 14px; height: 4px; transform: rotate(53deg); }
            }
            &.right {
              top: -12px; left: -6px; width: 24px; transform: rotate(62deg);
              &:before { top: -3px; left: 5px; width: 10px; height: 4px; transform: rotate(43deg); }
              &:after { top: -3px; left: 11px; width: 10px; height: 4px; transform: rotate(53deg); }
            }
          }
        }

        .body {
          width: 58px; height: 31px; top: 84px; left: 28px;
          border-radius: 50% 0; transform: rotate(-3deg); background: var(--c-deer-skin);

          &:before { width: 46px; height: 26px; top: -15px; left: 32px; border-radius: 0 0 50% 50%; transform: rotate(-55deg); background: var(--c-deer-skin); }
          &:after { width: 43px; height: 26px; top: -11px; left: 29px; border-radius: 0 0 50% 50%; transform: rotate(-30deg); background: var(--c-deer-skin); }

          .foot {
            .inner {
              border-radius: 0 50%; background: var(--c-deer-skin);
              .extension {
                background: var(--c-deer-skin); border-radius: 2px 50%;
                &:after { width: 7px; height: 8px; border-radius: 2px; background: var(--c-black); }
              }
            }

            &.front .inner {
              width: 40px; height: 8px; top: 13px; left: 35px; transform: rotate(-17deg);
              animation: reindeer__leg-front 0.3s linear alternate infinite;
              .extension {
                width: 28px; height: 8px; top: 3px; left: 100%; transform: rotate(131deg); transform-origin: top left;
                animation: reindeer__leg-front-extension 0.2s linear alternate infinite;
                &:after { top: 0; right: -2px; }
              }
            }

            &.back .inner {
              width: 56px; height: 9px; top: 37px; left: -29px; transform: rotate(-73deg);
              animation: reindeer__leg-back 0.3s linear alternate infinite;
              &:before { width: 25px; height: 16px; top: 4px; left: 25px; border-radius: 0 50%; transform: rotate(15deg); background: var(--c-deer-skin); }
              &:after { right: 0; width: 65%; height: 100%; background: var(--c-deer-skin); }
              
              .extension {
                top: 0; left: 0; width: 28px; height: 8px; transform-origin: top right;
                animation: reindeer__leg-back-extension 0.2s linear alternate infinite;
                &:after { width: 8px; height: 9px; top: -2px; left: -2px; border-radius: 2px 0 2px 2px; transform: rotate(14deg); }
              }
            }
          }

          .tail {
            width: 27px; height: 26px; top: 6px; left: -8px;
            border-radius: 50% 2px; transform: rotate(-17deg); background: var(--c-deer-skin);
            &:before { width: 15px; height: 5px; top: -2px; left: -3px; border-radius: 50%; transform: rotate(25deg); background: var(--c-deer-skin); }
          }
        }
      }
    }
  }

  .container {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    width: 98%;
    padding: 50px 0;

    .counterWrapper {
      width: 100%;
      text-align: center;
      position: relative;
      z-index: 1;

      p {
        background-image: url("./pattern-2.jpg");
        background-clip: text;
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        font-size: 90px;
      }

      .countdown {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        align-items: center;

        .countdownProp {
          display: flex;
          justify-content: center;
          align-items: center;
          width: 220px;
          margin: 10px;
          font-size: 180px;
          line-height: 150px;
          background-image: url("./pattern-1.png");
          background-clip: text;
          -webkit-background-clip: text;
          -webkit-text-fill-color: transparent;
          text-shadow: 0 0 100px var(--c-white);

          &:not(:first-child):before { content: ":"; }
          
          &:after {
            content: attr(date-count);
            width: 100%;
            font-size: 20px;
            -webkit-text-fill-color: var(--c-white);
            line-height: normal;
          }
        }
      }
    }
  }
}

@media only screen and (max-width: 700px) {
  .countdownSection {
    .decorations .decoration { width: 300px; height: 300px; }
    .container .counterWrapper {
      p { font-size: 70px; }
      .countdown {
        margin: 20px 0;
        .countdownProp { width: 100px; font-size: 80px; line-height: 80px; }
      }
    }
  }
}

@media only screen and (max-width: 500px) {
  .countdownSection {
    .decorations .santaWrapper { display: none; }
    .container .counterWrapper {
      p { font-size: 50px; }
      .countdown .countdownProp {
        display: block;
        &:not(:first-child):before { display: none; }
        &:after { display: block; }
      }
    }
  }
}

@keyframes santa__mov {
  0%, 100% { bottom: 0; left: 0; transform: translateZ(0) translateX(-100%) rotate(-10deg); }
  30% { bottom: 100%; left: 100%; transform: translateZ(0) translateX(100%) rotate(-10deg); }
  40% { bottom: 0; left: 100%; transform: translateZ(0) translateX(100%) rotateY(180deg); }
  70% { bottom: 0; left: 0; transform: translateZ(0) translateX(-100%) rotateY(180deg); }
}
@keyframes santa__hand-left {
  0% { transform: rotate(15deg); } 100% { transform: rotate(-30deg); }
}
@keyframes santa__hand-right {
  0% { transform: rotate(15deg); } 100% { transform: rotate(-6deg); }
}
@keyframes rope__left {
  0% { transform: rotate(2deg); }
  100% { transform: rotate(5deg); }
}
@keyframes rope__right {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(-4deg); }
}
@keyframes rope__inner {
  0% { transform: rotate(-15deg); } 100% { transform: rotate(-15deg) translateY(3px); }
}
@keyframes reindeer__leg-front {
  0% { transform: rotate(-24deg); } 100% { transform: rotate(-13deg); }
}
@keyframes reindeer__leg-front-extension {
  0% { transform: rotate(131deg); } 100% { transform: rotate(0); }
}
@keyframes reindeer__leg-back {
  0% { transform: rotate(-73deg); } 100% { transform: rotate(-95deg); }
}
@keyframes reindeer__leg-back-extension {
  0% { top: 4px; left: -4px; transform: rotate(50deg); }
  100% { top: 0; left: 0; transform: rotate(0); }
}
@keyframes snow {
  0% { fill-opacity: 1; }
  100% { fill-opacity: 0; transform: translateY(50%); }
}
</style>
</head>
<body>
  <section class="countdownSection">
  <div class="decorations">
    <div class="decoration" data-pos="bottom left"></div>
    <div class="decoration" data-pos="top right"></div>
    <div class="snow"></div>
    <div class="santaWrapper">
      <div class="santa">
        <div class="hat">
          <div></div>
          <div></div>
        </div>
        <div class="face">
          <div class="eyeBrows left"></div>
          <div class="eyeBrows right"></div>
          <div class="eye left"></div>
          <div class="eye right"></div>
          <div class="nose"></div>
          <div class="cheek left"></div>
          <div class="cheek right"></div>
          <div class="beard">
            <div></div>
            <div></div>
            <div></div>
          </div>
        </div>
        <div class="body">
          <div class="sweater"></div>
          <div class="hand left">
            <div class="inner"></div>
          </div>
          <div class="hand right"></div>
        </div>
      </div>
    <div class="rope"></div>
    <div class="rope back"></div>
    <div class="sled"></div>
    <div class="reindeer">
      <div class="face">
        <div class="ear"></div>
        <div class="horn right"></div>
        <div class="horn left"></div>
      </div>
      <div class="body">
        <div class="foot front">
          <div class="inner">
            <div class="extension"></div>
          </div>
        </div>
        <div class="foot back">
          <div class="inner">
            <div class="extension"></div>
          </div>
        </div>
        <div class="tail"></div>
      </div>
    </div>
    <div class="reindeer second">
      <div class="rope"></div>
      <div class="face">
        <div class="ear"></div>
        <div class="horn right"></div>
        <div class="horn left"></div>
      </div>
      <div class="body">
        <div class="foot front">
          <div class="inner">
            <div class="extension"></div>
          </div>
        </div>
        <div class="foot back">
          <div class="inner">
            <div class="extension"></div>
          </div>
        </div>
        <div class="tail"></div>
      </div>
    </div>
    </div>
  </div>
  <div class="container">
    <div class="counterWrapper">
      <p>There are only</p>
      <div class="countdown"></div>
      <p>until New Year</p>
    </div>
  </div>
</section>
<script>
document.addEventListener('DOMContentLoaded', () => {

  // --- 1. Модуль Таймера ---
  const initCountdown = (initialTargetDate) => {
    const container = document.querySelector('.countdown');
    if (!container) return;

    // Генерируем HTML один раз
    const units = ['Days', 'Hours', 'Minutes', 'Seconds'];
    container.innerHTML = units.map(unit => `
      <div class="countdownProp" date-count="${unit}">00</div>
    `).join('');

    // Кэшируем ссылки на элементы
    const elements = {
      Days: container.querySelector('[date-count="Days"]'),
      Hours: container.querySelector('[date-count="Hours"]'),
      Minutes: container.querySelector('[date-count="Minutes"]'),
      Seconds: container.querySelector('[date-count="Seconds"]'),
    };

    const pad = (n) => n < 10 ? `0${n}` : n;
    
    // Используем переменную для даты, чтобы можно было её обновить (переключить год)
    let targetDate = initialTargetDate;
    const fiveMinutes = 5 * 60 * 1000; // 5 минут в миллисекундах

    const update = () => {
      const now = new Date();
      let diff = targetDate - now;

      // Сценарий: Время вышло (Новый год наступил)
      if (diff <= 0) {
        // Если мы находимся в буфере 5 минут ПОСЛЕ Нового года
        if (Math.abs(diff) < fiveMinutes) {
          Object.values(elements).forEach(el => el.textContent = "00");
          return; // Выходим, оставляя нули
        } 
        
        // Если 5 минут прошло - переключаем цель на следующий год
        else {
          targetDate.setFullYear(targetDate.getFullYear() + 1);
          // Пересчитываем diff уже для новой даты, чтобы цифры обновились мгновенно
          diff = targetDate - now;
        }
      }

      // Обычный сценарий: вычисляем и обновляем цифры
      elements.Days.textContent = Math.floor(diff / (1000 * 60 * 60 * 24));
      elements.Hours.textContent = pad(Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60)));
      elements.Minutes.textContent = pad(Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60)));
      elements.Seconds.textContent = pad(Math.floor((diff % (1000 * 60)) / 1000));
    };

    setInterval(update, 1000);
    update();
  };

  // --- 2. Модуль Снега ---
  const initSnow = (amount = 100) => {
    const snowContainer = document.querySelector('.snow');
    if (!snowContainer) return;

    const random = (min, max) => Math.random() * (max - min) + min;

    const particles = Array.from({ length: amount }).map(() => {
      const cx = random(1, 100);
      const cy = -random(1, 100);
      const r = random(1, 3);
      return `<circle class="particle" r="${r}" cx="${cx}%" cy="${cy}" />`;
    }).join('');

    snowContainer.outerHTML = `
      <svg class="snow" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="none">
        ${particles}
      </svg>`;
  };

  // --- 3. Инициализация даты ---
  const now = new Date();
  const currentYear = now.getFullYear();
  let targetDate = new Date(`Jan 01, ${currentYear + 1} 00:00:00`);

  // Если пользователь зашел на сайт 1 января между 00:00 и 00:05,
  // нужно установить цель на ТЕКУЩИЙ год (который уже наступил), 
  // чтобы сработала логика "показывать нули", а не таймер на 365 дней вперед.
  if (now.getMonth() === 0 && now.getDate() === 1 && 
      now.getHours() === 0 && now.getMinutes() < 5) {
      targetDate = new Date(`Jan 01, ${currentYear} 00:00:00`);
  }

  initCountdown(targetDate);
  initSnow(100);
});
</script>
</body>
</html>
